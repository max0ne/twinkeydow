{"version":3,"sources":["common/config.js","common/api.js","redux/middleware.js","model/RepoSourceLoader.js","model/RepoSimilarLoader.js","model/RepoLoader.js","common/util.js","component/Navbar.js","component/Home.js","component/OAuth_callback.js","component/Welcome.js","component/App.js","registerServiceWorker.js","index.js","redux/reducer.js"],"names":["config","oauthLoginURL","userBasedRecommendURL","similarRepoAPIURL","ghClient","axios","create","baseURL","similarRepoClient","getUser","_x","_getUser","apply","this","arguments","_callee2","access_token","regenerator_default","a","wrap","_context2","prev","next","get","concat","abrupt","sent","data","stop","getUserStars","_x2","_getUserStars","_callee3","nextPageURL","resp","_parseLink","last","_context3","link","headers","_ref","_link$split","_link$split2","url1","tag1","url2","tag2","split","Object","slicedToArray","defineProperty","nextStarPageURL","undefined","getSimilar","_x3","_getSimilar","_callee4","rid","offset","limit","sims","_args4","_context4","length","slice","getRepoDetail","_x4","_getRepoDetail","_callee5","_context5","getRepoLanguages","_x5","_getRepoLanguages","_callee6","repoIdentifier","_context6","loadGithubTokenFromLocalStorage","window","localStorage","getItem","RepoSourceLoader","classCallCheck","_pool","_nextPageURL","reachedEnd","nn","splice","api","_this$_pool","push","toConsumableArray","RepoSimilarLoader","_this","loadMoreOf","asyncToGenerator","mark","_callee","_this$similarRepos$ri","similars","_context","repoStates","similarRepos","_","size","RepoLoader","props","possibleConstructorReturn","getPrototypeOf","call","componentDidMount","loadMore","loadRepoDetail","repo","setState","state","repoDetails","objectSpread","_ref2","tries","newRecommends","batch","loading","_loadMore","map","forEach","recommends","t0","console","error","sourceRepoIDs","newSourceRepos","newRepoDetailsState","from_rids","newSimilars","existingSimilars","res","sourceLoader","pop","id","Set","range","random","Promise","all","_ref4","similarLoader","sim","from_rid","to_rid","score","uniqBy","filter","has","children","React","Component","Navbar","handleLogout","bind","assertThisInitialized","dispatch","type","user","location","href","react_default","createElement","dist_es","Item","circular","src","avatar_url","wide","trigger","renderUserAvatar","on","position","fluid","vertical","onClick","pointing","secondary","name","as","urlParse","process","pathname","Menu","renderLoggedIn","renderNotLogIn","connect","Home","langs","repoLangs","owner","login","renderItemBasedWithData","renderLoading","renderNoRecommendAvailable","colcnt","Math","max","ceil","document","body","clientWidth","onUpdate","forceUpdate","columns","centered","col","Column","key","idx","rec","renderRepo","onOnScreen","once","fireOnMount","Group","color","style","height","active","Content","basedOnRepo","isNil","className","react_content_loader_es","extra","language","firstLangs","keys","lang","sort","b","html_url","target","rel","Header","full_name","background","languageMap","Description","description","icon","textAlign","role","aria-label","Fragment","component_Navbar","renderItemBased","RepoLoader_RepoLoader","Welcome","githubOAuthURL","encodeURIComponent","App","redirectIfNecessary","gotoWelcome","gotoHome","history","setTimeout","endsWith","query","middleware","log","_this2","lib","hideProgressBar","react_router_dom_es","ref","router","path","component","OAuth_callback","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","store","createStore","currentUser","action","__REDUX_DEVTOOLS_EXTENSION__","applyMiddleware","token","result","getState","defaults","setItem","ReactDOM","render","es","component_App","getElementById","URL","origin","addEventListener","fetch","response","status","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.a87e4aa8.chunk.js","sourcesContent":["export default {\n  oauthLoginURL: 'https://d945ipi8b7.execute-api.us-east-1.amazonaws.com/dev/oauth_login',\n  userBasedRecommendURL: 'https://d945ipi8b7.execute-api.us-east-1.amazonaws.com/dev/user_rcmd',\n\n  similarRepoAPIURL: 'https://k8rgby9lr1.execute-api.us-east-1.amazonaws.com/dev/repo/similar',\n};\n","import axios from 'axios';\nimport config from './config';\n\n/**\n * github token\n * @type {string}\n */\nlet ghToken = undefined;\nexport const ghClient = axios.create({\n  baseURL: \"https://api.github.com\",\n});\n\nexport const similarRepoClient = axios.create({\n  baseURL: config.similarRepoAPIURL,\n});\n\nexport const setGithubToken = (token) => {\n  ghClient.defaults.headers[\"Authorization\"] = `Bearer ${token}`;\n  ghToken = token;\n}\n\nexport async function getUserBasedRecommend() {\n  if (!ghToken) {\n    throw new Error('github login required for `getUserBasedRecommend`');\n  }\n  return (await axios.get(`${config.userBasedRecommendURL}?limit=20&ghToken=${ghToken}`)).data;\n}\n\nexport async function getUser(access_token) {\n  return (await ghClient.get(`/user?access_token=${access_token}`)).data\n}\n\nfunction parseLink(link) {\n  // '<https://api.github.com/events?page=2>; rel=\"next\", <https://api.github.com/events?page=10>; rel=\"last\"'\n  const [, url1, tag1, url2, tag2] = link.split(/<(.+?)>;\\s*rel=\"(.+?)\",\\s*<(.+?)>;\\s*rel=\"(.+?)\"/);\n  return {\n    [tag1]: url1,\n    [tag2]: url2,\n  };\n}\n\nexport async function getUserStars(nextPageURL) {\n  const resp = await ghClient.get(nextPageURL || '/user/starred?page=1');\n  const { next, last } = parseLink(resp.headers.link || '');\n  return {\n    data: resp.data,\n    nextStarPageURL: last === nextPageURL ? undefined : next,\n  };\n}\n\nexport async function getSimilar(rid, offset = 0, limit = 5) {\n  const sims = (await similarRepoClient.get(`/?rid=${rid}&limit=${offset + limit}`)).data;\n  return sims.slice(offset, sims.length);\n}\n\nexport async function getRepoDetail(rid) {\n  return (await ghClient.get(`repositories/${rid}`)).data;\n}\n\nexport async function getRepoLanguages(repoIdentifier) {\n  return (await ghClient.get(`/repos/${repoIdentifier}/languages`)).data;\n}\n","import * as api from '../common/api';\n\nexport const TokenLocalstorageKey = 'TokenLocalstorageKey';\n\nexport const loadGithubTokenFromLocalStorage = () => {\n  return window.localStorage.getItem(TokenLocalstorageKey);\n}\n\nexport const saveGithubToken = store => next => action => {\n  const result = next(action)\n\n  if (action.type === 'SET_GH_USER') {\n    const { access_token } = store.getState();\n    api.setGithubToken(access_token);\n    window.localStorage.setItem(TokenLocalstorageKey, access_token);\n  }\n\n  return result;\n}\n","import * as api from '../common/api';\n\nexport default class RepoSourceLoader {\n  constructor() {\n    this._pool = [];\n    this._nextPageURL = undefined;\n    this.reachedEnd = false;\n  }\n\n  /**\n   * pop `nn` repos\n   * @param {number} nn\n   * @returns {[object]}\n   */\n  async pop(nn) {\n    if (this.reachedEnd) {\n      return [];\n    }\n\n    // try to get from in memory _pool\n    if (this._pool.length >= nn) {\n      return this._pool.splice(0, nn);\n    }\n    // load next page\n    const { data, nextStarPageURL } = await api.getUserStars(this._nextPageURL);\n    this.reachedEnd = this._nextPageURL === nextStarPageURL;\n    this._nextPageURL = nextStarPageURL;\n    this._pool.push(...data);\n    return this._pool.splice(0, nn);\n  }\n}\n","import * as api from '../common/api';\nimport _ from 'lodash';\n\nexport default class RepoSimilarLoader {\n  constructor() {\n    // loaded similar repos\n    // key being repoid, value being array of similar repoids\n    this.similarRepos = { };\n    \n    // state of each rid of every key in similarRepos\n    // state can either be loading or loaded\n    this.repoStates = { };\n  }\n\n  loadMoreOf = async (rid) => {\n    this.repoStates[rid] = 'loading';\n    this.similarRepos[rid] = this.similarRepos[rid] || [];\n    \n    const similars = await api.getSimilar(rid, _.size(this.similarRepos[rid]));\n    this.similarRepos[rid].push(...similars);\n    this.repoStates[rid] = 'loaded';\n\n    return similars;\n  }\n}\n","import React from 'react';\nimport _ from 'lodash';\n\nimport RepoSourceLoader from './RepoSourceLoader';\nimport RepoSimilarLoader from './RepoSimilarLoader';\nimport * as api from '../common/api';\n\nexport default class RepoLoader extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.sourceLoader = new RepoSourceLoader();\n    this.similarLoader = new RepoSimilarLoader();\n\n    this.state = {\n      repoDetails: { },\n\n      // list of RepoSimilar objects\n      recommends: [ ],\n\n      loading: false,\n    };\n    this.loading = false;\n  }\n\n  componentDidMount = () => {\n    this.loadMore(10);\n  }\n\n  loadRepoDetail = async (rid) => {\n    const repo = await api.getRepoDetail(rid);\n    this.setState((state) => ({\n      repoDetails: {\n        ...state.repoDetails,\n        [rid]: repo,\n      },\n    }));\n  }\n\n  loadMore = async (nn) => {\n    if (this.loading) {\n      return;\n    }\n    this.loading = true;\n    this.setState({ loading: true });\n    try {\n      let tries = 10;\n      const newRecommends = [];\n      while (true) {\n        const batch = await this._loadMore();\n        _.map(batch, 'to_rid').forEach(this.loadRepoDetail);\n        newRecommends.push(...batch);\n        this.setState({\n          recommends: [...this.state.recommends, ...newRecommends],\n        });\n        if (--tries === 0 || newRecommends.length >= nn) {\n          break;\n        }\n      }\n    } catch (err) {\n      console.error(err);\n    }\n    this.setState({ loading: false });\n    this.loading = false;\n  }\n\n  _loadMore = async () => {\n    // 1. get some source repos to find similar from\n    let sourceRepoIDs = [];\n\n    if (!this.sourceLoader.reachedEnd) {\n      // if theres still unused source\n      // load the source and load some similar ones from that source\n      const newSourceRepos = await this.sourceLoader.pop(10);\n\n      // store these new sources into states\n      const newRepoDetailsState = { };\n      newSourceRepos.forEach((repo) => {\n        newRepoDetailsState[repo.id] = repo;\n      });\n      this.setState({\n        repoDetails: {\n          ...this.state.repoDetails,\n          ...newRepoDetailsState,\n        },\n      });\n\n      sourceRepoIDs = _.map(newSourceRepos, 'id');\n    } else {\n      // if no more source to read from\n      // start reading similar repos of given repos on ui\n      // randomly pick 5 previously used repos\n      const from_rids = [...new Set(_.map(this.state.recommends, 'from_rid'))];\n      sourceRepoIDs = _.range(5).map(() => from_rids[_.random(from_rids.length - 1)]);\n    }\n\n    // load similars for each of these source repo ids\n    const newSimilars = [];\n    await Promise.all(sourceRepoIDs.map(async (rid) => {\n      const similars = await this.similarLoader.loadMoreOf(rid);\n      newSimilars.push(...similars.map((sim) => ({\n        from_rid: rid,\n        to_rid: sim.rid,\n        score: sim.sim,\n      })));\n    }));\n\n    // remove ones that are already on ui (similar repo conflicted from other repos)\n    const existingSimilars = new Set(_.map(this.state.recommends, 'to_rid'));\n    const res = _.uniqBy(newSimilars, 'to_rid').filter((sim) => !existingSimilars.has(sim.to_rid));\n    return res;\n  }\n\n  render() {\n    return this.props.children({\n      loadMore: this.loadMore,\n      repoDetails: this.state.repoDetails,\n      recommends: this.state.recommends,\n      loading: this.state.loading,\n    });\n  }\n}\n","import { toast as _toast } from 'react-toastify';\nimport * as urlParse from 'url-parse';\n\nexport function toastError(err) {\n  _toast((err.response && err.response.body && err.response.body.status) || err.toString());\n}\n\nexport function toast(...params) {\n  _toast(...params);\n}\n\nexport const getBaseName = () => urlParse(process.env.PUBLIC_URL).pathname;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Image, Menu, Popup } from 'semantic-ui-react';\nimport * as util from '../common/util';\n\nclass Navbar extends Component {\n\n  constructor() {\n    super();\n    this.handleLogout = this.handleLogout.bind(this);\n  }\n\n  handleLogout() {\n    this.props.dispatch({\n      type: 'SET_GH_USER',\n      access_token: undefined,\n      user: undefined,\n    });\n    window.location.href = '/';\n  }\n\n  renderUserAvatar() {\n    return (\n      <div>\n        <Menu.Item >\n          <Image size=\"mini\" circular src={this.props.user.avatar_url} />\n        </Menu.Item>\n      </div>\n    );\n  }\n\n  renderLoggedIn() {\n    return (\n      <Popup wide trigger={this.renderUserAvatar()} on='click' position='bottom center' >\n        <Menu fluid vertical>\n          <Menu.Item onClick={this.handleLogout}>Logout</Menu.Item>\n        </Menu>\n      </Popup>\n    );\n  }\n\n  renderNotLogIn() {\n    // not used for now\n    return (\n      null\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <Menu pointing secondary>\n          <Menu.Item name='Twinkeydow' as='a' href={util.getBaseName()} />\n          <Menu.Menu position='right'>\n            {\n              this.props.user ? this.renderLoggedIn() : this.renderNotLogIn()\n            }\n          </Menu.Menu>\n        </Menu>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n});\n\nexport default connect(mapStateToProps)(Navbar);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport languageMap from 'language-map';\n\nimport {\n  Grid,\n  Visibility,\n  Responsive,\n  Image,\n  Header,\n  Loader,\n  Label,\n  Card,\n  Icon,\n} from 'semantic-ui-react';\nimport { Facebook as ContentLoader } from 'react-content-loader';\n\nimport '../css/Home.css';\n\nimport RepoLoader from '../model/RepoLoader';\nimport * as api from '../common/api';\nimport Navbar from './Navbar';\n\nclass Home extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      repoLangs: { },\n    }\n  }\n\n  getRepoLanguages = async (repo) => {\n    if (!_.has(this.state.repoLangs, repo.id)) {\n      const langs = await api.getRepoLanguages(`${repo.owner.login}/${repo.name}`);\n      \n      this.setState((state) => ({\n        ...state,\n        repoLangs: {\n          ...state.repoLangs,\n          [repo.id]: langs,\n        },\n      }));\n    }\n  }\n\n  renderRepo(idx, repo, basedOnRepo) {\n    if (_.isNil(repo)) {\n      return (\n        <div className='repo-container' key={idx}>\n          <Card>\n            <ContentLoader />\n            <Card.Content extra>\n              <Icon name='sync' />\n              It's loading...\n            </Card.Content>\n          </Card>\n        </div>\n      );\n    }\n\n    const langs = this.state.repoLangs[repo.id] || (repo.language ? { [repo.language]: 1 } : { });\n    const firstLangs = Object.keys(langs)\n      .filter((lang) => !_.isNil(lang))\n      .sort((a, b) => langs[b] - langs[a]).slice(0, 2);\n\n    return (\n      <div className='repo-container' key={repo.id}>\n        <Card href={repo.html_url} target=\"_blank\" rel=\"noopener noreferrer\">\n          <Card.Content>\n            <Card.Header className='home-repo-name'>\n              <Image className='home-repo-avatar' circular src={(repo.owner && repo.owner.avatar_url) || ''}></Image>\n              {repo.full_name}\n            </Card.Header>\n            {\n              firstLangs.map((lang) => (\n                <Label\n                  key={lang}\n                  style={{ background: (languageMap[lang] || {}).color, color: 'white' }}\n                  size='tiny'\n                  >{lang}</Label>\n              ))\n            }\n            <Card.Description>{repo.description}</Card.Description>\n          </Card.Content>\n          {\n            basedOnRepo && (\n              <Card.Content extra>\n                <Icon name='heart' />\n                similar to {basedOnRepo.full_name}\n              </Card.Content>\n            )\n          }\n        </Card>\n      </div>\n    )\n  }\n\n  renderNoRecommendAvailable() {\n    return (\n      <div>\n        <Header as='h1' icon textAlign='center'>\n          <Header.Content>\n            <span role='img' aria-label='not found'>🤷</span>\n          </Header.Content>\n        </Header>\n        <Header as='h3' textAlign='center'>\n          <p>Sorry you don't have enough interactions on Github.</p>\n          <p><a href=\"https://github.com/explore\" target=\"_blank\" rel=\"noopener noreferrer\">Go star some repos you like and come back later</a></p>\n        </Header>\n      </div>\n    );\n  }\n\n  renderLoading() {\n    return <Loader active>Loading</Loader>;\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Navbar />\n        <div className='recommendation-content-container'>\n          {this.renderItemBased()}\n        </div>\n      </React.Fragment>\n    );\n  }\n\n  renderItemBasedWithData = ({ loadMore, repoDetails, recommends, loading }) => {\n    if (recommends.length === 0) {\n      return loading ? this.renderLoading() : this.renderNoRecommendAvailable();\n    }\n    const colcnt = Math.max(Math.ceil(document.body.clientWidth / 400), 1);\n    // load 3 more rows very time\n    loadMore = loadMore.bind(colcnt * 3);\n    return (\n      <Responsive onUpdate={() => this.forceUpdate()}>\n        <Grid columns={colcnt} centered>{\n            _.range(colcnt).map((col) => (\n              <Grid.Column key={col}>{\n                recommends\n                  .filter((_, idx) => idx % colcnt === col)\n                  .map((rec, idx) => this.renderRepo(idx, repoDetails[rec.to_rid], repoDetails[rec.from_rid]))\n              }</Grid.Column>\n            ))\n        }</Grid>\n        <Visibility offset={[10, 100]} onOnScreen={loadMore} once={false} fireOnMount={true}>\n          <Card.Group>\n            <Card color='orange' style={{ height: 50 }} onClick={loadMore} centered>\n              {\n                loading ? <Loader active={true} /> : <Card.Content>Load More</Card.Content>\n              }\n            </Card>\n          </Card.Group>\n        </Visibility>\n      </Responsive>\n    );\n  }\n\n  renderItemBased() {\n    return (\n      <RepoLoader>{this.renderItemBasedWithData}</RepoLoader>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n});\n\nexport default connect(mapStateToProps)(Home);\n","import React, { Component } from 'react';\n\nexport default class Home extends Component {\n  render() {\n    return <div>Validating OAuth callback...</div>;\n  }\n}\n","import React, { Component } from 'react';\nimport { Button, Icon } from 'semantic-ui-react';\n\nimport '../css/Welcome.css';\nimport config from '../common/config';\n\nexport default class Welcome extends Component {\n  render() {\n    const githubOAuthURL = `${config.oauthLoginURL}?oauth_done_redirect=${encodeURIComponent(window.location.href)}`;\n    return (\n      <div className='welcome-container'>\n        <h1 className='welcome-logo'>\n          <span role='img' aria-label='welcome'>🙋</span> hi welcome to project Twinkeydow\n        </h1>\n        <h5>it gives you personalized Github repo recommendations</h5>\n        <br />\n        <br />\n        <Button as=\"a\" href={githubOAuthURL}><Icon name=\"github\" />\n          Try it!<br />\n          Login through Github\n        </Button>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport '../css/App.css';\n\nimport { ToastContainer } from 'react-toastify';\nimport * as urlParse from 'url-parse';\n\nimport * as middleware from '../redux/middleware';\nimport * as api from '../common/api';\n\nimport Home from './Home';\nimport OAuth_callback from './OAuth_callback';\nimport Welcome from './Welcome';\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.redirectIfNecessary();\n  }\n\n  redirectIfNecessary = async () => {\n    const gotoWelcome = () => {\n      if (!this.history) {\n        return setTimeout(gotoWelcome, 100);\n      }\n      if (!window.location.href.endsWith('/welcome')) {\n        this.history.push('/welcome');\n      }\n    };\n    const gotoHome = () => {\n      if (!this.history) {\n        return setTimeout(gotoHome, 100);\n      }\n      if (!window.location.href.endsWith('/home')) {\n        this.history.push('/home');\n      }\n    };\n\n    try {\n      const access_token =\n        urlParse(window.location.href, true).query.access_token ||\n        urlParse(window.location.href.split('#')[1], true).query.access_token ||\n        middleware.loadGithubTokenFromLocalStorage();\n      if (!access_token) {\n        return gotoWelcome();\n      }\n\n      // if token presents, set it to api first\n      // valid token later\n      this.props.dispatch({\n        type: 'SET_GH_USER',\n        access_token,\n      });\n\n      const user = await api.getUser(access_token);\n      this.props.dispatch({\n        type: 'SET_GH_USER',\n        access_token,\n        user,\n      });\n      gotoHome();\n    }\n    catch (err) {\n      console.log(err);\n      return gotoWelcome();\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <ToastContainer position='top-center' hideProgressBar={true} />\n        <Router ref={(router) => { this.history = router.history }}>\n          <Switch>\n            <Route path=\"/home\" component={Home} />\n            <Route path=\"/welcome\" component={Welcome} />\n            <Route path=\"/oauth_done\" component={OAuth_callback} />\n          </Switch>\n        </Router>\n      </div>\n    );\n  }\n}\n\nexport default connect()(App);\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './component/App';\nimport registerServiceWorker from './registerServiceWorker';\n\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport rootReducer from './redux/reducer';\nimport * as middleware from './redux/middleware';\n\nimport 'semantic-ui-css/semantic.min.css';\n\n/* eslint-disable no-underscore-dangle */\nconst store = createStore(rootReducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\n  applyMiddleware(middleware.saveGithubToken),\n);\n/* eslint-enable */\n\nReactDOM.render((\n  <Provider store={store}>\n    <App />\n  </Provider>\n), document.getElementById('root'));\nregisterServiceWorker();\n","\nexport default (state = { currentUser: undefined }, action) => {\n  switch (action.type) {\n    case 'SET_GH_USER':\n      return {\n        ...state,\n        access_token: action.access_token,\n        user: action.user,\n      }\n    case 'CLEAR_GH_USER':\n      return {\n        ...state,\n        access_token: undefined,\n        user: undefined,\n      };\n    default:\n      return state\n  }\n};\n"],"sourceRoot":""}